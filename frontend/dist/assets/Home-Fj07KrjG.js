import{c as k,u as R,a as T,r,j as e,m as I,L as N,B as d,S as q,P as i,b as B,C as F}from"./index-rlvyAQjv.js";import{P as M}from"./productService-C-422sth.js";import{S as A}from"./search-iOyadxTL.js";import{S as $}from"./square-pen-K6U9dNr8.js";import{C as U,a as V}from"./chevron-left-ClVCkRiE.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],D=k("funnel",H);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Q=k("printer",O),E=({product:s,purchaseEnabled:u=!0})=>{const{addToCart:b}=R(),{user:a}=T(),[p,l]=r.useState(s.imageUrl);r.useEffect(()=>{l(s.imageUrl)},[s.imageUrl]);const m=(a==null?void 0:a.role)==="Admin",y=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.price),j=n=>{n.preventDefault(),b(s,1)},x=()=>{const n="https://placehold.co/400x300?text=Sem+Imagem";p!==n&&l(n)};return e.jsxs(I.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4},className:"group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden bg-gray-50",children:[e.jsx("img",{src:p,alt:s.name,onError:x,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2",children:[e.jsx(N,{to:`/produto/${s.id}`,children:e.jsx(d,{variant:"ghost",className:"bg-white text-gray-900 hover:bg-gray-100 rounded-full p-3 shadow-lg",children:e.jsx(A,{size:20})})}),m&&e.jsx(N,{to:`/putiroski/produtos/${s.id}`,children:e.jsx(d,{variant:"ghost",className:"bg-white text-blue-600 hover:bg-blue-50 rounded-full p-3 shadow-lg",children:e.jsx($,{size:20})})})]})]}),e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("h3",{className:"text-lg font-bold text-gray-800 line-clamp-1 group-hover:text-primary transition-colors",children:e.jsx(N,{to:`/produto/${s.id}`,children:s.name})})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2 flex-grow",children:s.description}),e.jsxs("div",{className:"pt-4 border-t border-gray-100 flex items-center justify-between mt-auto",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold block",children:"A partir de"}),e.jsx("span",{className:"text-xl font-bold text-primary",children:y})]}),!m&&u&&e.jsx(d,{size:"sm",onClick:j,className:"rounded-full px-3 py-2 shadow-sm hover:shadow-md",title:"Adicionar ao Carrinho",children:e.jsx(q,{size:18})})]})]})]})};E.propTypes={product:i.shape({id:i.string.isRequired,name:i.string.isRequired,description:i.string,price:i.number.isRequired,imageUrl:i.string,stockQuantity:i.number}).isRequired,purchaseEnabled:i.bool};const X=()=>{const s=B(),[u,b]=r.useState([]),[a,p]=r.useState({page:1,totalPages:1,totalItems:0}),[l,m]=r.useState(!0),[y,j]=r.useState(!0),[x,n]=r.useState(1),[v,w]=r.useState(""),[h,P]=r.useState(""),[c,L]=r.useState({hero_badge:"Carregando...",hero_title:"...",hero_subtitle:"...",home_products_title:"Nossos Produtos",home_products_subtitle:"Confira nosso catálogo",whatsapp_number:"",hero_bg_url:"",purchase_enabled:"true"});r.useEffect(()=>{const t=setTimeout(()=>{S(1)},500);return()=>clearTimeout(t)},[v,h]),r.useEffect(()=>{F.getSettings().then(t=>{t&&L(o=>({...o,...t}))}).catch(t=>{console.error(t),s("/error",{replace:!0})})},[s]);const S=async t=>{m(!0);try{let o="",C="";h&&([o,C]=h.split("-"));const g=await M.getAll(t,8,v,o,C);b(g.items),p({page:g.page,totalPages:g.totalPages,totalItems:g.totalItems}),n(g.page)}catch(o){console.error("Erro ao carregar catálogo:",o),s("/error",{replace:!0})}finally{m(!1),j(!1)}},f=t=>{t>=1&&t<=a.totalPages&&(S(t),_())},z=t=>{t.preventDefault();const o=parseInt(x);isNaN(o)||f(o)},_=()=>{const t=document.getElementById("catalogo");t&&t.scrollIntoView({behavior:"smooth"})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-secondary text-white overflow-hidden transition-all duration-500",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20 transform scale-105",style:{backgroundImage:`url('${c.hero_bg_url||"https://images.unsplash.com/photo-1562564055-71e051d33c19?q=80&w=2070"}' )`}}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 py-24 sm:px-6 lg:px-8 flex flex-col items-center text-center",children:e.jsxs(I.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-white/10 border border-white/20 text-white text-sm font-semibold mb-6 backdrop-blur-sm",children:c.hero_badge}),e.jsx("h2",{className:"text-5xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight drop-shadow-lg",children:c.hero_title}),e.jsx("p",{className:"text-xl text-gray-200 mb-10 max-w-2xl mx-auto drop-shadow-md",children:c.hero_subtitle}),e.jsx("div",{className:"flex gap-4 justify-center",children:e.jsx(d,{variant:"success",className:"rounded-full px-8 py-4 text-lg shadow-xl shadow-black/20",onClick:_,children:"Ver Catálogo"})})]})})]}),e.jsxs("section",{id:"catalogo",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-end mb-12 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Q,{className:"text-primary"}),c.home_products_title]}),e.jsx("p",{className:"text-gray-500 mt-2",children:c.home_products_subtitle})]}),e.jsxs("div",{className:"w-full lg:w-auto flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow sm:w-80",children:[e.jsx("input",{type:"text",placeholder:"Buscar produto...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary outline-none shadow-sm transition-all",value:v,onChange:t=>w(t.target.value)}),e.jsx(A,{className:"absolute left-4 top-3.5 text-gray-400",size:20})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsx(D,{className:"absolute left-4 top-3.5 text-gray-400",size:20}),e.jsxs("select",{className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary outline-none shadow-sm appearance-none cursor-pointer",value:h,onChange:t=>P(t.target.value),children:[e.jsx("option",{value:"",children:"Mais Recentes"}),e.jsx("option",{value:"name-asc",children:"Nome (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Nome (Z-A)"}),e.jsx("option",{value:"price-asc",children:"Menor Preço"}),e.jsx("option",{value:"price-desc",children:"Maior Preço"})]})]})]})]}),l&&y?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando catálogo..."})]}):e.jsx("div",{className:`transition-opacity duration-300 ${l?"opacity-50 pointer-events-none":"opacity-100"}`,children:u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:u.map(t=>e.jsx(E,{product:t,purchaseEnabled:c.purchase_enabled!=="false"},t.id))}),a.totalPages>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-16",children:[e.jsxs(d,{variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50",onClick:()=>f(a.page-1),disabled:a.page===1||l,children:[e.jsx(U,{size:20})," Anterior"]}),e.jsxs("form",{onSubmit:z,className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Página"}),e.jsx("input",{type:"number",min:"1",max:a.totalPages,value:x,onChange:t=>n(t.target.value),onBlur:()=>f(parseInt(x)||1),className:"w-12 text-center border border-gray-300 rounded p-1 text-sm outline-none focus:ring-2 focus:ring-primary font-bold text-gray-800",disabled:l}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["de ",a.totalPages]})]}),e.jsxs(d,{variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50",onClick:()=>f(a.page+1),disabled:a.page===a.totalPages||l,children:["Próximo ",e.jsx(V,{size:20})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200 text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Nenhum produto encontrado com estes filtros."}),e.jsx(d,{variant:"ghost",className:"text-primary",onClick:()=>{w(""),P("")},children:"Limpar Filtros"})]})})]})]})};export{X as Home};
