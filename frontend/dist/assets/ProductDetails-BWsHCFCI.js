import{c as P,p as A,u as B,b as E,r as t,f as I,j as e,L as M,B as u,S as L,C as Q}from"./index-rlvyAQjv.js";import{P as U}from"./productService-C-422sth.js";import{M as _,S as D}from"./ShippingCalculator-IPk2xNCi.js";import{P as O}from"./shippingService-DcU-EXS8.js";import"./truck-DlIyHYNf.js";import"./circle-alert-DiXs9p5I.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G=P("zap",R),W=()=>{const{id:c}=A(),{addToCart:d}=B(),h=E(),[s,g]=t.useState(null),[m,x]=t.useState(""),[b,f]=t.useState(""),[j,y]=t.useState(!0),[l,p]=t.useState(1),[o,v]=t.useState(!0),N=JSON.parse(localStorage.getItem("user")||"{}"),i=I.isAuthenticated()&&N.role==="Admin";t.useEffect(()=>{(async()=>{try{const[r,n]=await Promise.all([U.getById(c),Q.getSettings()]);g(r),x(r.imageUrl),n&&(n.whatsapp_number&&f(n.whatsapp_number),n.purchase_enabled==="false"&&v(!1))}catch(r){console.error("Erro ao carregar dados",r)}finally{y(!1)}})()},[c]);const w=async()=>{await d(s,l)},S=async()=>{await d(s,l),h("/carrinho")},C=()=>{const a=`Olá! Gostaria de um *orçamento personalizado* para o produto: *${s.name}*. Tenho necessidades específicas...`,r=b||"5511999999999";window.open(`https://wa.me/${r}?text=${encodeURIComponent(a)}`,"_blank")},k=()=>{const a="https://placehold.co/600x400?text=Sem+Imagem";m!==a&&x(a)};if(j)return e.jsx("div",{className:"text-center py-20",children:"Carregando..."});if(!s)return e.jsx("div",{className:"text-center py-20",children:"Produto não encontrado."});const z=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.price);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-10 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden md:flex",children:[e.jsx("div",{className:"md:w-1/2 h-96 md:h-auto bg-gray-100 relative group",children:e.jsx("img",{src:m,alt:s.name,onError:k,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"})}),e.jsx("div",{className:"md:w-1/2 p-8 flex flex-col",children:e.jsxs("div",{className:"mb-auto",children:[e.jsx(M,{to:"/",className:"text-primary hover:underline text-sm mb-4 block",children:"← Voltar para o catálogo"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"text-3xl font-bold text-primary mb-6",children:[z," ",e.jsx("span",{className:"text-sm text-gray-400 font-normal",children:"/ unidade"})]}),e.jsx("p",{className:"text-gray-500 mb-8 leading-relaxed whitespace-pre-line border-b pb-6",children:s.description}),e.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[!i&&o&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>p(a=>Math.max(1,a-1)),className:"p-3 text-gray-600 hover:bg-gray-100",children:e.jsx(_,{size:16})}),e.jsx("span",{className:"w-12 text-center font-bold text-gray-800",children:l}),e.jsx("button",{onClick:()=>p(a=>a+1),className:"p-3 text-gray-600 hover:bg-gray-100",children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.stockQuantity>0?`${s.stockQuantity} disponíveis`:"Indisponível"})]}),!o&&e.jsxs("div",{className:"bg-blue-50 text-blue-800 p-4 rounded-lg text-center mb-4 border border-blue-200",children:[e.jsx("strong",{children:"Modo Orçamento:"})," As compras diretas estão temporariamente pausadas. Utilize o botão abaixo para solicitar um orçamento personalizado."]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[!i&&o&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{onClick:w,disabled:s.stockQuantity<1,variant:"outline",className:"text-primary border-primary hover:bg-primary/5",children:[e.jsx(L,{size:20})," Adicionar"]}),e.jsxs(u,{onClick:S,disabled:s.stockQuantity<1,className:"w-full py-3 text-base shadow-primary/30",children:[e.jsx(G,{size:20})," Comprar Agora"]})]}),e.jsxs("button",{onClick:C,className:["w-full border-2 font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors","bg-[#25D366] hover:bg-[#1EBE5A]",o&&!i?"sm:col-span-2":""].join(" "),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 175.216 175.552",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"b",x1:"85.915",x2:"86.535",y1:"32.567",y2:"137.092",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0","stop-color":"#57d163"}),e.jsx("stop",{offset:"1","stop-color":"#23b33a"})]}),e.jsx("filter",{id:"a",width:"1.115",height:"1.114",x:"-.057",y:"-.057","color-interpolation-filters":"sRGB",children:e.jsx("feGaussianBlur",{stdDeviation:"3.531"})})]}),e.jsx("path",{fill:"#b3b3b3",d:"m54.532 138.45 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.523h.023c33.707 0 61.139-27.426 61.153-61.135.006-16.335-6.349-31.696-17.895-43.251A60.75 60.75 0 0 0 87.94 25.983c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.558zm-40.811 23.544L24.16 123.88c-6.438-11.154-9.825-23.808-9.821-36.772.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954z",filter:"url(#a)"}),e.jsx("path",{fill:"#fff",d:"m12.966 161.238 10.439-38.114a73.42 73.42 0 0 1-9.821-36.772c.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954z"}),e.jsx("path",{fill:"url(#b)",d:"M87.184 25.227c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.559 23.146-6.069 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.524h.023c33.707 0 61.14-27.426 61.153-61.135a60.75 60.75 0 0 0-17.895-43.251 60.75 60.75 0 0 0-43.235-17.929z"}),e.jsx("path",{fill:"#fff","fill-rule":"evenodd",d:"M68.772 55.603c-1.378-3.061-2.828-3.123-4.137-3.176l-3.524-.043c-1.226 0-3.218.46-4.902 2.3s-6.435 6.287-6.435 15.332 6.588 17.785 7.506 19.013 12.718 20.381 31.405 27.75c15.529 6.124 18.689 4.906 22.061 4.6s10.877-4.447 12.408-8.74 1.532-7.971 1.073-8.74-1.685-1.226-3.525-2.146-10.877-5.367-12.562-5.981-2.91-.919-4.137.921-4.746 5.979-5.819 7.206-2.144 1.381-3.984.462-7.76-2.861-14.784-9.124c-5.465-4.873-9.154-10.891-10.228-12.73s-.114-2.835.808-3.751c.825-.824 1.838-2.147 2.759-3.22s1.224-1.84 1.836-3.065.307-2.301-.153-3.22-4.032-10.011-5.666-13.647"})]}),"Orçamento Personalizado"]})]})]}),o&&e.jsx(D,{productId:s.id,className:"bg-gray-50 border border-gray-200"})]})})]})})};export{W as ProductDetails};
