import{a as v,r as o,j as e,U as C,e as w,f as u,z as c}from"./index-rlvyAQjv.js";import{m as p,a as f,c as x}from"./formatters-MA0lDvmk.js";import{L as h}from"./loader-BWiHmDWm.js";import{F as S}from"./file-text-DJiuKPyZ.js";import{S as P}from"./save-BeV_G0NF.js";const D=()=>{const{user:z,logout:b}=v(),[r,m]=o.useState({fullName:"",phoneNumber:"",cpfCnpj:"",email:""}),[g,j]=o.useState(!0),[n,d]=o.useState(!1);o.useEffect(()=>{(async()=>{try{const a=await u.getProfile();m({fullName:a.fullName||"",phoneNumber:f(a.phoneNumber||""),cpfCnpj:p(a.cpfCnpj||""),email:a.email||""})}catch{c.error("Erro ao carregar perfil.")}finally{j(!1)}})()},[]);const i=t=>{const{name:a,value:s}=t.target;let l=s;a==="cpfCnpj"?l=p(s):a==="phoneNumber"&&(l=f(s)),m({...r,[a]:l})},N=async t=>{var a,s;t.preventDefault(),d(!0);try{await u.updateProfile({fullName:r.fullName,phoneNumber:x(r.phoneNumber),cpfCnpj:x(r.cpfCnpj)}),c.success("Perfil atualizado com sucesso!")}catch(l){const y=((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.message)||"Erro ao atualizar.";c.error(y)}finally{d(!1)}};return g?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(h,{className:"animate-spin text-primary",size:40})}):e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-2xl",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Meu Perfil"}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-6 sm:p-8",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"E-mail (não alterável)"}),e.jsx("input",{value:r.email,readOnly:!0,className:"w-full bg-gray-50 border border-gray-200 rounded-lg p-3 text-gray-500 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Nome Completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-3 text-gray-400",size:18}),e.jsx("input",{name:"fullName",value:r.fullName,onChange:i,className:"w-full border border-gray-300 rounded-lg pl-10 p-3 focus:ring-2 focus:ring-primary outline-none",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"CPF ou CNPJ"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 text-gray-400",size:18}),e.jsx("input",{name:"cpfCnpj",value:r.cpfCnpj,onChange:i,className:"w-full border border-gray-300 rounded-lg pl-10 p-3 focus:ring-2 focus:ring-primary outline-none",placeholder:"000.000.000-00",maxLength:18,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Telefone / Celular"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-3 text-gray-400",size:18}),e.jsx("input",{name:"phoneNumber",value:r.phoneNumber,onChange:i,className:"w-full border border-gray-300 rounded-lg pl-10 p-3 focus:ring-2 focus:ring-primary outline-none",placeholder:"(00) 00000-0000",maxLength:15,required:!0})]})]}),e.jsxs("div",{className:"pt-4 flex gap-4",children:[e.jsxs("button",{type:"submit",disabled:n,className:"flex-1 bg-primary hover:brightness-90 text-white font-bold py-3 rounded-lg flex justify-center items-center gap-2 shadow-lg shadow-primary/30 transition-all disabled:opacity-70",children:[n?e.jsx(h,{className:"animate-spin",size:20}):e.jsx(P,{size:20}),n?"Salvando...":"Salvar Alterações"]}),e.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 border border-red-200 text-red-600 font-bold rounded-lg hover:bg-red-50 transition-colors",children:"Sair da Conta"})]})]})})})]})};export{D as Profile};
