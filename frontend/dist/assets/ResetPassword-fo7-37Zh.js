import{g as p,r as t,b as y,j as e,z as a,f as j}from"./index-rlvyAQjv.js";import{L as v}from"./lock-BkzgGzk3.js";const S=()=>{const[n]=p(),[r,x]=t.useState(""),[o,h]=t.useState(""),[l,i]=t.useState(!1),f=y(),d=n.get("email"),c=n.get("token"),b=async s=>{var m,u;if(s.preventDefault(),r!==o){a.error("As senhas não conferem.");return}if(r.length<8){a.error("A senha deve ter no mínimo 8 caracteres.");return}i(!0);try{await j.resetPassword({email:d,token:c,newPassword:r}),a.success("Senha alterada com sucesso!"),f("/login",{replace:!0})}catch(g){a.error(((u=(m=g.response)==null?void 0:m.data)==null?void 0:u.message)||"Erro ao redefinir senha.")}finally{i(!1)}};return!d||!c?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600 font-bold",children:"Link de recuperação inválido ou expirado."}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{size:32,className:"text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Nova Senha"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Nova Senha"}),e.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg p-3",value:r,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Confirmar Senha"}),e.jsx("input",{type:"password",required:!0,className:"w-full border border-gray-300 rounded-lg p-3",value:o,onChange:s=>h(s.target.value)})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-white font-bold py-3 rounded-lg mt-4 disabled:opacity-70",children:l?"Salvando...":"Redefinir Senha"})]})]})})};export{S as ResetPassword};
